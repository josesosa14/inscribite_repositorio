<script src="<?= baseAdminUrl() ?>plugins/jQuery/jQuery-2.1.4.min.js"></script><script src="<?= baseAdminUrl() ?>js/bootstrap.min.js" type="text/javascript"></script><script src="<?= baseAdminUrl() ?>plugins/slimScroll/jquery.slimscroll.min.js" type="text/javascript"></script><script src='<?= baseAdminUrl() ?>plugins/fastclick/fastclick.min.js'></script><script src="<?= baseAdminUrl() ?>js/app.min.js" type="text/javascript"></script><script src="<?= baseAdminUrl() ?>js/demo.js" type="text/javascript"></script><script src="<?= baseAdminUrl() ?>js/mask/jquery.mask.min.js"></script><script src="<?= baseAdminUrl() ?>js/datepicker/js/bootstrap-datepicker.min.js"></script><script src="<?= baseAdminUrl() ?>js/table/bootstrap-table.min.js"></script><script src="<?= baseAdminUrl() ?>js/table/locale/bootstrap-table-es-AR.min.js"></script><script src="<?= baseAdminUrl() ?>js/validation/jquery.validate.min.js"></script><script src="<?= baseAdminUrl() ?>js/validation/additional-methods.min.js"></script><script src="<?= baseAdminUrl() ?>js/validation/localization/messages_es_AR.min.js"></script><script src="<?= baseAdminUrl() ?>public/js/export/bootstrap-table-export.min.js"></script><script src="<?= baseAdminUrl() ?>public/js/export/tableExport.min.js"></script><link href="<?= baseAdminUrl() ?>css/select2/select2.min.css" rel="stylesheet" type="text/css" /><script src="<?= baseAdminUrl() ?>js/select2/select2.min.js"></script><script src="<?= baseAdminUrl() ?>js/select2/es.js"></script><script src="http://malsup.github.com/jquery.form.js"></script><script>    function base_url() {        return "<?= base_url(); ?>";    }    $("#proveedor_numero").change(function ()    {        traerProveedorById($(this).val());    });    function traerProveedorById(nid)    {        $.ajax({            type: "POST",            data: {id: nid},            dataType: 'json',            url: '<?= base_url() ?>JSONproveedorById'        })                .done(function (datos) {                    $("#proveedor_razon_social").val(datos['razonSocial']);                    $("#proveedor_cuit").val(datos['cuit']);                    $("#proveedor_condiva").val(datos['cond_iva_nombre']);                });    }    $(document).ready(function () {        $("#proveedor_numero").select2({            minimumInputLength: 3,            ajax: {                url: "<?= base_url() ?>proveedoresSelect2",                dataType: 'json',                quietMillis: 500,                data: function (term, page) { // page is the one-based page number tracked by Select2                    return {                        q: term                    };                },                results: function (data, page) {                    return {results: datos, more: more};                }            },            formatResult: repoFormatResult, // omitted for brevity, see the source of this page            formatSelection: repoFormatSelection, // omitted for brevity, see the source of this page            dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller            escapeMarkup: function (m) {                return m;            }        });    });    function repoFormatResult(repo) {        var markup = '<div class="row-fluid">' +                '<div class="span10">' +                '<div class="row-fluid">' +                '<div class="span6">' + nombre + 'xxx</div>' +                '<div class="span3"><i class="fa fa-code-fork"></i>' + nombre + 'aaa</div>' +                '</div>';        if (repo.description) {            markup += '<div>' + repo.description + 'ddd</div>';        }        markup += '</div></div>';        return markup;    }    function repoFormatSelection(repo) {        return repo.id;    }</script><script>    window.btnBorrar = {        'click .borrar': function (e, value, row) {            var tr = $(this).parent().parent();            var estado = tr.find(".estado");            if (estado.val() === "delete") {                estado.val("1");                tr.attr("class", "");            } else {                estado.val("delete");                control.val("1");                tr.attr("class", "danger");            }        }    };    var $table = $('.table_grilla');    var form = $("#formPagos");    var control = $("#control");    $(function () {        $table.bootstrapTable({            onPostBody: function () {                $('.fecha').mask('00/00/0000');                form.validate();            }        });    });    function formatoBtnBorrar(value, row, index) {        if (row.control !== "0") {            return [                '<span class="glyphicon glyphicon-remove borrar" style="color:red;cursor:pointer"></span>'            ].join('');        } else {            return '';        }    }    $(".table_grilla").on('change', '.nombre', function () {        var tr = $(this).parent().parent();        var estado = tr.find(".estado");        cambiarEstado(estado, estado.val(), tr);    });    $(".table_grilla").on('change', '.date', function () {        var tr = $(this).parent().parent();        var estado = tr.find(".estado");        cambiarEstado(estado, estado.val(), tr);    });    function cambiarEstado(input, valor, tr) {        switch (valor) {            case "0":                input.val("insert");                tr.attr("class", "info");                break;            case "1":                input.val("update");                tr.attr("class", "success");                break;        }    }    function guardar() {        enviarFormulario();    }    function enviarFormulario() {        var options = {            success: showResponse,            dataType: 'json',            timeout: 3000        };        form.ajaxSubmit(options);        alert('Datos guardados');        $('#tablaCobros').bootstrapTable("refresh");    }    // pre-submit callback    function showRequest(formData, jqForm, options) {        // formData is an array; here we use $.param to convert it to a string to display it        // but the form plugin does this for you automatically when it submits the data        var queryString = $.param(formData);        // jqForm is a jQuery object encapsulating the form element.  To access the        // DOM element for the form do this:        // var formElement = jqForm[0];        alert('About to submit: \n\n' + queryString);        // here we could return false to prevent the form from being submitted;        // returning anything other than false will allow the form submit to continue        return true;    }    // post-submit callback    function showResponse(data) {        $table.bootstrapTable("refresh");    }</script><script>    var $table_documentos = $('#table_documentos');    var $table_detalles = $('#table');    $(document).ready(function () {        $("button#busca_documentos").click(function (e) {            e.preventDefault();            $table_documentos.bootstrapTable('refresh', {                url: base_url() + 'renglonesPagoDocumento/' + $("#proveedor_numero").val()            });        });        $(".content").on('click', "a.editarPago", function (e) {            var pago_id = $(this).attr('id');            $("#pago_id").val(pago_id);            e.preventDefault();            $table_documentos.bootstrapTable('refresh', {                url: base_url() + 'getDocumentosPago/' + pago_id            });            $table_detalles.bootstrapTable('refresh', {                url: base_url() + 'getDetallesPago/' + pago_id            });            $.ajax({                type: "POST",                dataType: 'json',                url: '<?= base_url() ?>getPagoById/' + pago_id            })                    .done(function (datos) {                        $("#proveedor_razon_social").val(datos['proveedor_razon']);                        $("#proveedor_cuit").val(datos['proveedor_cuit']);                        $("#proveedor_condiva").val(datos['proveedor_condiva']);                        $("#pago_fecha").val(datos['fecha']);                        $("#proveedor_numero").children('option').remove();                        $("#proveedor_numero").append('<option value="' + datos['proveedor_id'] + '">' + datos['proveedor_razon'] + '</option>');                        $("#proveedor_numero").select2();                    });        });    });</script></body></html>