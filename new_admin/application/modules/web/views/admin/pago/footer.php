<script src="http://malsup.github.com/jquery.form.js"></script><script>    $("#proveedor_numero").change(function ()    {        traerProveedorById($(this).val());    });    function traerProveedorById(nid)    {        $.ajax({            type: "POST",            data: {id: nid},            dataType: 'json',            url: '<?= base_url() ?>JSONempresaById'        })                .done(function (datos) {                    $("#proveedor_razon_social").val(datos['emp_nombre']);                    $("#proveedor_cuit").val(datos['emp_cuit']);                    $("#proveedor_condiva").val(datos['emp_cond_iva']);                });    }    $(document).ready(function () {        $("#proveedor_numero").select2({            minimumInputLength: 3,            ajax: {                url: "<?= base_url() ?>proveedoresSelect2",                dataType: 'json',                quietMillis: 500,                data: function (term, page) { // page is the one-based page number tracked by Select2                    return {                        q: term                    };                },                results: function (data, page) {                    return {results: datos, more: more};                }            },            formatResult: repoFormatResult, // omitted for brevity, see the source of this page            formatSelection: repoFormatSelection, // omitted for brevity, see the source of this page            dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller            escapeMarkup: function (m) {                return m;            }        });    });    function repoFormatResult(repo) {        var markup = '<div class="row-fluid">' +                '<div class="span10">' +                '<div class="row-fluid">' +                '<div class="span6">' + nombre + 'xxx</div>' +                '<div class="span3"><i class="fa fa-code-fork"></i>' + nombre + 'aaa</div>' +                '</div>';        if (repo.description) {            markup += '<div>' + repo.description + 'ddd</div>';        }        markup += '</div></div>';        return markup;    }    function repoFormatSelection(repo) {        return repo.id;    }</script><script>    window.btnBorrar = {        'click .borrar': function (e, value, row) {            var tr = $(this).parent().parent();            var estado = tr.find(".estado");            if (estado.val() === "delete") {                estado.val("1");                tr.attr("class", "");            } else {                estado.val("delete");                control.val("1");                tr.attr("class", "danger");            }        }    };    var $table = $('.table_grilla');    var form = $("#formPagos");    var control = $("#control");    $(function () {        $table.bootstrapTable({            onPostBody: function () {                $('.fecha').mask('00/00/0000');                form.validate();            }        });    });    function formatoBtnBorrar(value, row, index) {        if (row.control !== "0") {            return [                '<span class="glyphicon glyphicon-remove borrar" style="color:red;cursor:pointer"></span>'            ].join('');        } else {            return '';        }    }    $(".table_grilla").on('change', '.nombre', function () {        var tr = $(this).parent().parent();        var estado = tr.find(".estado");        cambiarEstado(estado, estado.val(), tr);    });    $(".table_grilla").on('change', '.date', function () {        var tr = $(this).parent().parent();        var estado = tr.find(".estado");        cambiarEstado(estado, estado.val(), tr);    });    function cambiarEstado(input, valor, tr) {        switch (valor) {            case "0":                input.val("insert");                tr.attr("class", "info");                break;            case "1":                input.val("update");                tr.attr("class", "success");                break;        }    }    /*function borrarPago(id){     if(confirm("¿Está seguro que desea eliminar el pago Número: " + id + "?") == true)     window.location.href = ('<?= base_url() ?>borrar_pago/' + id);     }*/    function borrarPago(id) {        if (confirm("¿Está seguro que desea eliminar el pago Número: " + id + "?") == true) {            $.ajax({                url: '<?= base_url() ?>borrar_pago/' + id,            });            $('#tabla_pago').bootstrapTable("refresh");            return false;        }    }    function guardar() {        enviarFormulario();    }    function enviarFormulario() {        var options = {            success: showResponse,            dataType: 'json',            timeout: 3000        };        form.ajaxSubmit(options);        alert('Datos guardados');        $('#tabla_pago').bootstrapTable("refresh");    }    // pre-submit callback    function showRequest(formData, jqForm, options) {        // formData is an array; here we use $.param to convert it to a string to display it        // but the form plugin does this for you automatically when it submits the data        var queryString = $.param(formData);        // jqForm is a jQuery object encapsulating the form element.  To access the        // DOM element for the form do this:        // var formElement = jqForm[0];        alert('About to submit: \n\n' + queryString);        // here we could return false to prevent the form from being submitted;        // returning anything other than false will allow the form submit to continue        return true;    }    // post-submit callback    function showResponse(data) {        $table.bootstrapTable("refresh");    }</script></body></html>