<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class Pago_Controller extends Admin_Controller {    public function __construct() {        parent::__construct();        $this->setTemplateDefault("admin/pago/templatePago");        //$this->validaPermiso("full pagos", "ver pagos");        $this->load->model("pago/pagomodel");        $this->load->model("pago_renglones/PagoRenglonesModel");    }    public function index($args = false) {        if ($this->post()) {            $this->pagomodel->insertaPago($this->post());            redirect('pagos');        } else if ($args) {            $data["pago"] = $this->pagomodel->getPagoById($args);            $data["pagos_renglones"] = $this->PagoRenglonesModel->getPagoRenglonesByPago($args);            $data['footer'] = 'footer';            $this->loadTemplateDefault("index", $data);        } else {            $data['pagos'] = $this->pagomodel->getPagos();            $data['footer'] = 'footer';            $this->loadTemplateDefault("index", $data);        }    }    public function borrar($id) {        $this->pagomodel->borrar($id);        redirect("pagos");    }    public function pago() {        $pago = $this->pagomodel->getPagoById(1);        echo $pago->getComentario();    }    public function obtenerPagoJson() {        $respuesta = NULL;        if ($this->post("idPago")) {            $pago = $this->pagomodel->getCollectionById("Pago", $this->post("idPago"));            if ($pago !== NULL) {                $respuesta = $pago->obtenerArray();            }        }        echo json_encode($respuesta);    }    public function getPagosAjax() {        echo json_encode($this->pagomodel->getPagosAjax($_GET));    }    public function renglonesPagoDocumento($pro_id) {        echo json_encode($this->pagomodel->renglonesPagoDocumentos($pro_id));    }    public function renglonesPagoDetalle($args = false) {        echo json_encode($this->pagomodel->renglonesPagoDetalle($args));    }    public function getDocumentosPago($pago_id) {        echo json_encode($this->pagomodel->getDocumentosPago($pago_id));    }    public function getDetallesPago($pago_id) {        echo json_encode($this->pagomodel->getDetallesPago($pago_id));    }    public function getPagoById($pago_id) {        echo json_encode($this->pagomodel->getPagoByIdJson($pago_id));    }    public function getPagoTableAjax() {        echo json_encode($this->pagomodel->getPagoTableAjax($_GET));    }    public function getJSONPagos() {        $pagos = $this->pagomodel->getJSONPagos($_GET);        echo json_encode($pagos);    }    public function setFechaPago($pag_id){        $this->pagomodel->marcarPagado($pag_id);        redirect("pagos");    }}